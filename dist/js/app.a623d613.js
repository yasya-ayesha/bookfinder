(function(t){function e(e){for(var a,r,i=e[0],l=e[1],u=e[2],m=0,d=[];m<i.length;m++)r=i[m],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);c&&c(e);while(d.length)d.shift()();return n.push.apply(n,u||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],a=!0,i=1;i<o.length;i++){var l=o[i];0!==s[l]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=o[0]))}return t}var a={},s={app:0},n=[];function r(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=a,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(o,a,function(e){return t[e]}.bind(null,a));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var c=l;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";o("85ec")},2728:function(t,e,o){t.exports=o.p+"img/nocover.a1b8aa0f.svg"},"568d":function(t,e,o){t.exports=o.p+"img/shopping-cart.c6999e1e.svg"},"56d7":function(t,e,o){"use strict";o.r(e),o.d(e,"eventEmitter",(function(){return Y}));o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("2b0e"),s=o("8c4f"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{id:"app"}},[a("div",{staticClass:"nav"},[a("router-link",{attrs:{to:"/"}},[a("div",{staticClass:"home-box"},[a("img",{staticClass:"home-logo",attrs:{src:o("9771"),alt:"home"}}),a("h2",{staticClass:"home-title"},[t._v("BookFinder")])])]),a("router-link",{attrs:{to:"/cart"}},[a("div",{staticClass:"cart-box"},[0===t.numberOfBooks||t.showMessage?t._e():a("p",{staticClass:"mb-0"},[1===t.numberOfBooks?a("span",[t._v("Added "+t._s(t.numberOfBooks)+" book")]):t._e(),t.numberOfBooks>1?a("span",[t._v("Added "+t._s(t.numberOfBooks)+" books")]):t._e(),t._v(" worth "+t._s(t._f("roundPrice")(t.totalPrice))+" UAH ")]),a("img",{staticClass:"mr-1",attrs:{src:o("568d"),alt:"cart"}})])])],1),t.showMessage?a("p",{staticClass:"alert alert-success mb-0 mt-5"},[t._v(" Your order in the amount of "+t._s(t._f("roundPrice")(t.totalAmountOrder))+" UAH is successful! ")]):t._e(),a("div",{staticClass:"main-screen"},[a("router-view")],1)])},r=[],i=(o("a9e3"),{name:"App",data:function(){return{numberOfBooks:0,totalPrice:0,totalAmountOrder:0,showMessage:!1}},filters:{roundPrice:function(t){return Number(Math.round(t+"e2")+"e-2")}},computed:{customersOrders:function(){return this.$store.getters.customersOrders}},created:function(){var t=this;Y.$on("cartListUpdated",(function(){for(var e in t.numberOfBooks=0,t.totalPrice=0,t.customersOrders)t.numberOfBooks+=t.customersOrders[e].cart.length,t.totalPrice+=t.customersOrders[e].totalAmount})),Y.$on("madeOrder",(function(e){t.totalAmountOrder=t.$store.getters.customersOrders[e].totalAmount,t.showMessage=!0,setTimeout((function(){t.showMessage=!1}),15e3)}))}}),l=i,u=(o("034f"),o("2877")),c=Object(u["a"])(l,n,r,!1,null,null,null),m=c.exports,d=o("2909"),f=(o("d3b7"),o("2f62"));a["default"].use(f["a"]);var p=new f["a"].Store({state:{books:[],customers:{}},mutations:{setBooksData:function(t,e){var o;t.books=[],(o=t.books).push.apply(o,Object(d["a"])(e.items))},addBookToCart:function(t,e){var o=e.customerInfo.phoneNumber;t.customers[o]||(t.customers[o]={}),t.customers[o].customerInfo=e.customerInfo,t.customers[o].cart||(t.customers[o].cart=[]),t.customers[o].cart.push(e.book),t.customers[o].totalAmount?t.customers[o].totalAmount+=e.bookAmount:t.customers[o].totalAmount=e.bookAmount},removeCustomerData:function(t,e){var o=delete t.customers[e];o&&(t.books=[])}},actions:{getBooksData:function(t,e){var o=t.commit;fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(e)).then((function(t){return t.json()})).then((function(t){return o("setBooksData",t)})).catch((function(){Y.$emit("noResults")}))},addBookToCart:function(t,e){var o=t.commit;o("addBookToCart",e),Y.$emit("cartListUpdated",e.customerInfo.customer)},makeOrder:function(t,e){var o=t.commit;Y.$emit("madeOrder",e),o("removeCustomerData",e),Y.$emit("cartListUpdated",e)}},getters:{booksData:function(t){return t.books},customersOrders:function(t){return t.customers}}}),b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"search"},[o("form",{staticClass:"search-form row g-3",on:{submit:function(e){return e.preventDefault(),t.getBooksData.apply(null,arguments)}}},[o("div",{staticClass:"col-6"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.booksName,expression:"booksName"}],staticClass:"form-control",attrs:{type:"text",id:"searchField",placeholder:"Type a keyword"},domProps:{value:t.booksName},on:{input:function(e){e.target.composing||(t.booksName=e.target.value)}}})]),t._m(0)]),o("Books")],1)},v=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-2"},[o("button",{staticClass:"submit btn btn-primary mb-3",attrs:{type:"submit"}},[t._v("Send")])])}],h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.noResults&&0===t.books.length?a("div",[a("p",{staticClass:"error-title text-center"},[t._v(" Sorry, we couldn't find any books by your request :( ")]),a("img",{attrs:{src:o("de8a"),alt:"books not found"}})]):t._e(),a("ul",{staticClass:"list-unstyled mt-5"},t._l(t.books,(function(e,s){return a("li",{key:e.id,staticClass:"list-item media mb-5 d-flex"},[a("div",{staticClass:"d-flex"},[e.volumeInfo.imageLinks?a("img",{staticClass:"d-inline shadow-lg book-img",attrs:{alt:"book cover",src:e.volumeInfo.imageLinks.smallThumbnail}}):a("img",{staticClass:"d-inline shadow-lg book-img",attrs:{src:o("2728"),alt:"no cover available"}}),a("div",{staticClass:"media-body ml-3 book-info"},[a("div",{staticClass:"book-info"},[a("h5",{staticClass:"mt-0 mb-2"},[t._v(" "+t._s(e.volumeInfo.title)+" ")]),a("div",{staticClass:"mb-2"},[a("ul",{staticClass:"list-unstyled list-group-horizontal"},[void 0===e.volumeInfo.authors?a("span",[t._v(" Author is unknown ")]):1===e.volumeInfo.authors.length?a("span",[t._v(" Author: ")]):a("span",[t._v("Authors: ")]),t._l(e.volumeInfo.authors,(function(o,s){return a("li",{key:s,staticClass:"d-inline"},[s===e.volumeInfo.authors.length-1?a("span",[t._v(t._s(o))]):a("span",[t._v(t._s(o)+", ")])])}))],2)]),e.volumeInfo.publishedDate?a("p",[t._v(" Published: "+t._s(t._f("formatDate")(e.volumeInfo.publishedDate))+" ")]):a("p",[t._v(" Date of publishing is unknown ")])])])]),a("Modal",{attrs:{bookIndex:s}})],1)})),0)])},k=[],g=(o("a15b"),o("ac1f"),o("1276"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"h-100"},[!0===t.book.saleInfo.isEbook?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"modal-prevent-closing"+t.bookIndex,expression:"'modal-prevent-closing'+bookIndex"}],staticClass:"btn btn-success order-btn"},[t._v("Order")]):!1===t.book.saleInfo.isEbook?a("p",{staticClass:"d-flex align-items-center alert alert-danger mb-0"},[a("span",[t._v("Not in stock")])]):t._e()],1),a("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing"+t.bookIndex,title:t.book.volumeInfo.title},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk},scopedSlots:t._u([{key:"modal-header",fn:function(e){var o=e.close;return[a("h5",[t._v("Modal Header")]),a("b-button",{staticClass:"close",attrs:{size:"sm"},on:{click:function(t){return o()}}},[t._v(" X ")])]}},{key:"modal-footer",fn:function(e){var o=e.ok;return[a("b-button",{class:["btn","btn-primary",{disabled:!t.$v.inputData.name.required||!t.$v.inputData.email.required||!t.$v.inputData.phoneNumber.minLength}],attrs:{size:"lg",variant:"success"},on:{click:function(t){return o()}}},[t._v(" Send ")])]}}])},[a("div",{staticClass:"d-flex justify-content-around align-items-center mb-3"},[t.book.volumeInfo.imageLinks?a("img",{staticClass:"mr-3",attrs:{alt:"book cover",src:t.book.volumeInfo.imageLinks.smallThumbnail}}):a("img",{staticClass:"mr-3",attrs:{alt:"book cover",src:o("2728")}}),t.book.saleInfo.retailPrice?a("p",{staticClass:"alert alert-warning"},[t._v("Book price:"),a("br"),a("span",[a("strong",[t._v(t._s(t.book.saleInfo.retailPrice.amount))]),t._v(" "+t._s(t.book.saleInfo.retailPrice.currencyCode)+" ")])]):a("p",[t._v("Book is not for sale")])]),a("p",[t._v(t._s(t.book.volumeInfo.description))]),a("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.sendToCart()}}},[a("b-form-group",{attrs:{label:"Name:","label-for":"name-input"}},[a("b-form-input",{class:{"is-invalid":t.$v.inputData.name.$error,"is-valid":!t.$v.inputData.name.$invalid},attrs:{id:"name-input",required:""},model:{value:t.inputData.name,callback:function(e){t.$set(t.inputData,"name","string"===typeof e?e.trim():e)},expression:"inputData.name"}}),t.$v.inputData.name.required?t._e():a("div",{staticClass:"invalid-feedback"},[t._v(" Filling of this field is required ")]),t.$v.inputData.name.minLength?t._e():a("div",{staticClass:"invalid-feedback"},[t._v(" Name should be at least 2 symbols long ")])],1),a("b-form-group",{attrs:{label:"Email:","label-for":"email-input"}},[a("b-form-input",{class:{"is-invalid":t.$v.inputData.email.$error,"is-valid":!t.$v.inputData.email.$invalid},attrs:{id:"email-input",required:""},model:{value:t.inputData.email,callback:function(e){t.$set(t.inputData,"email",e)},expression:"inputData.email"}}),t.$v.inputData.email.required?t._e():a("div",{staticClass:"invalid-feedback"},[t._v(" Filling of this field is required ")]),t.$v.inputData.email.email?t._e():a("div",{staticClass:"invalid-feedback"},[t._v(" This email isn't valid ")])],1),a("b-form-group",{attrs:{label:"Phone number:","label-for":"phone-input"}},[a("the-mask",{staticClass:"form-control",class:{"is-invalid":t.$v.inputData.phoneNumber.$error,"is-valid":!t.$v.inputData.phoneNumber.$invalid},attrs:{type:"tel",id:"phone-input",masked:!0,mask:["+380#########"]},model:{value:t.inputData.phoneNumber,callback:function(e){t.$set(t.inputData,"phoneNumber",e)},expression:"inputData.phoneNumber"}}),t.$v.inputData.phoneNumber.required?t.$v.inputData.phoneNumber.minLength&&t.$v.inputData.phoneNumber.maxLength?t._e():a("div",{staticClass:"invalid-feedback"},[t._v(" This phone number isn't valid ")]):a("div",{staticClass:"invalid-feedback"},[t._v(" Filling of this field is required ")])],1)],1)])],1)}),_=[],C=(o("b0c0"),o("3a60")),D=o.n(C),y=o("b5ae"),$={name:"Modal",components:{TheMask:C["TheMask"]},props:["bookIndex"],data:function(){return{inputData:{name:"",email:"",phoneNumber:"+380"}}},validations:{inputData:{name:{minLength:Object(y["minLength"])(2),required:y["required"]},email:{email:y["email"],required:y["required"]},phoneNumber:{minLength:Object(y["minLength"])(13),maxLength:Object(y["maxLength"])(13),required:y["required"]}}},computed:{book:function(){return this.$store.getters.booksData[this.bookIndex]}},methods:{validationRun:function(t){this.$v.inputData[t].$touch()},resetModal:function(){this.inputData.name="",this.inputData.email="",this.inputData.phoneNumber="+380"},handleOk:function(t){t.preventDefault(),this.sendToCart()},sendToCart:function(){var t=this;for(var e in this.$data.inputData)this.validationRun(e);if(!this.$v.inputData.$error){var o={customerInfo:this.inputData,book:this.book,bookAmount:this.book.saleInfo.retailPrice.amount};this.$store.dispatch("addBookToCart",o),this.$nextTick((function(){t.$bvModal.hide("modal-prevent-closing"+t.bookIndex)}))}}}},x=$,O=(o("c426"),Object(u["a"])(x,g,_,!1,null,"4457cb7a",null)),w=O.exports,I={name:"Books",props:["bookIndex"],components:{Modal:w},data:function(){return{noResults:!1}},computed:{books:function(){return this.$store.getters.booksData}},filters:{formatDate:function(t){return t.split("-").reverse().join(".")}},created:function(){var t=this;Y.$on("noResults",(function(){t.noResults=!0}))}},N=I,P=(o("af57"),Object(u["a"])(N,h,k,!1,null,"25f9eb26",null)),A=P.exports,B={name:"Home",props:{},components:{Books:A},data:function(){return{booksName:""}},methods:{getBooksData:function(){this.$store.dispatch("getBooksData",this.booksName)}}},j=B,T=(o("8821"),Object(u["a"])(j,b,v,!1,null,"5f285766",null)),M=T.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",{staticClass:"error-title text-center mb-4 mt-5"},[t._v(" This is your cart ")]),a("ul",{staticClass:"list-unstyled"},t._l(t.cartData,(function(e,o){return a("li",{key:o,staticClass:"listItem media d-flex flex-column mb-4"},[a("div",{staticClass:"d-flex flex-column justify-content-center align-items-center p-0 pb-2"},[a("p",{staticClass:"mb-0 font-weight-bold alert alert-secondary"},[t._v("Current order for: "),a("strong",[t._v(t._s(o))])]),a("ul",{staticClass:"list-unstyled"},t._l(e.cart,(function(e,o){return a("li",{key:o,staticClass:"d-flex justify-content-between listItem-cart listItem-cart--border-bottom d-flex align-items-center py-2 mt-3 mb-3",class:{"listItem-cart--border-top":0===o}},[a("div",{staticClass:"media-body d-flex"},[a("div",{staticClass:"d-flex align-items-center"},[a("img",{staticClass:"d-inline float-left shadow-lg mr-3 align-self-center book-img",attrs:{src:e.volumeInfo.imageLinks.smallThumbnail,alt:"book cover"}})]),a("div",[a("h5",{staticClass:"mt-0 mb-2"},[t._v(t._s(e.volumeInfo.title))]),a("p",{staticClass:"mb-0 text-left flex-grow-1"},[t._v(t._s(e.volumeInfo.description))])])]),a("p",{staticClass:"alert alert-primary ml-2"},[t._v(" Price:"),a("br"),t._v(" "),a("strong",[t._v(t._s(e.saleInfo.retailPrice.amount))]),t._v(" UAH ")])])})),0),a("p",{staticClass:"alert alert-success mb-3 text-right font-weight-bold"},[t._v(" Total: "),a("strong",[t._v(t._s(t._f("roundPrice")(t.totalAmount(o))))]),t._v(" UAH ")]),a("button",{staticClass:"btn btn-primary px-5",attrs:{type:"button"},on:{click:function(e){return t.makeOrder(o)}}},[t._v(" Send order ")])])])})),0),a("img",{attrs:{src:o("cb69d"),alt:"cart"}})])},L=[],S={name:"Cart",methods:{makeOrder:function(t){this.$store.dispatch("makeOrder",t),this.$router.push("/")},totalAmount:function(t){if(void 0!==this.cartData[t].totalAmount)return this.cartData[t].totalAmount}},computed:{cartData:function(){return this.$store.getters.customersOrders}},filters:{roundPrice:function(t){return Number(Math.round(t+"e2")+"e-2")}}},E=S,R=(o("c7bb"),Object(u["a"])(E,q,L,!1,null,"2745c0b4",null)),U=R.exports,H=o("1dce"),F=o.n(H),z=o("7e05");o("f9e3"),o("7db1");a["default"].config.productionTip=!1,a["default"].use(F.a),a["default"].use(s["a"]),a["default"].use(D.a),a["default"].use(z["a"]);var J=[{path:"/",component:M},{path:"/cart",component:U}],X=new s["a"]({routes:J,mode:"history"}),Y=new a["default"];new a["default"]({store:p,router:X,render:function(t){return t(m)}}).$mount("#app")},7394:function(t,e,o){},"85ec":function(t,e,o){},8821:function(t,e,o){"use strict";o("d27e")},9771:function(t,e,o){t.exports=o.p+"img/find.887d952a.svg"},a5f3:function(t,e,o){},af57:function(t,e,o){"use strict";o("d86f")},c426:function(t,e,o){"use strict";o("a5f3")},c7bb:function(t,e,o){"use strict";o("7394")},cb69d:function(t,e,o){t.exports=o.p+"img/empty-cart.c6c2f2da.svg"},d27e:function(t,e,o){},d86f:function(t,e,o){},de8a:function(t,e,o){t.exports=o.p+"img/notfound.67d04910.svg"}});
//# sourceMappingURL=app.a623d613.js.map